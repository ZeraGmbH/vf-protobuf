#-------------------------------------------------
#
# Project created by QtCreator 2013-07-16T12:59:51
#
#-------------------------------------------------


TEMPLATE = lib
VF_AUTOGENERATED = 1

exists( ../../vein-framework.pri ) {
  include(../../vein-framework.pri)
}

QT       -= core gui

TARGET = vein-framework-protobuf

#CONFIG += staticlib

unix:!symbian {
    maemo5 {
        target.path = /opt/usr/lib
    } else {
        target.path = /usr/lib
    }
    INSTALLS += target
}

OTHER_FILES += \
    vfcore.proto

unix:LIBS += -lprotobuf

android:LIBS+= -L/home/samuel/tmp/android-protobuf/android_libs/protobuf/obj/local/armeabi-v7a/ -lprotobuf
android:INCLUDEPATH+="/home/samuel/tmp/android-protobuf/android_libs/protobuf/jni/src/"



#Generate protocol buffers
SRCDIR=$$_PRO_FILE_PWD_ #qmake is to stupid to add a source directory variable by default?!?
PROTOBUFS = $$SRCDIR/vfcore.proto
protobuf.target = vfcore.pb.cc
protobuf.commands = protoc -I$$SRCDIR/ --cpp_out=. $$PROTOBUFS
#android:protobuf.commands = /home/samuel/tmp/android-protobuf/jni/build_x86_64/src/protoc -I$$SRCDIR/ --cpp_out=. $$PROTOBUFS
QMAKE_EXTRA_TARGETS += protobuf

PRE_TARGETDEPS += vfcore.pb.cc
QMAKE_CLEAN += vfcore.pb.cc vfcore.pb.h


# autogenerated protocol buffer
HEADERS += vfcore.pb.h
SOURCES += vfcore.pb.cc

header_files.files = $$HEADERS
header_files.path = /usr/include/
INSTALLS += header_files

