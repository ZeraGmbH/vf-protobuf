package protobuf;

message Vein {
    message Command {
        enum CommandType {
            ASYNC_ENTITY_UPDATE = 1;
            ASYNC_PEER_UPDATE = 2;
            ASYNC_PEERLIST_UPDATE = 3;

//commented out because they are not used
            //REQUEST_ANSWER = 100; // The expected result of any request
            REQUEST_ENTITY_DATA = 101;
            REQUEST_ENTITY_START_ASYNC_UPDATE = 102;
            REQUEST_ENTITY_STOP_ASYNC_UPDATE = 103;

            REQUEST_PEER_DATA = 150;
            REQUEST_PEERLIST = 151;

            MESSAGE_DEBUG = 201;
            MESSAGE_ERROR = 202;


            KILL_HUB = 300;
            INIT_ENTITY = 301;
            INIT_HUB = 302;
            INIT_PEER = 303;
        }
        required CommandType type = 1 [default = ASYNC_ENTITY_UPDATE];
        optional bytes uidSender = 2;
        repeated bytes uidReceiverList = 3;
    }
    message Entity {
        required bytes uid = 1;
        required bytes ownerUid = 2;
        optional string entityName = 100;
        repeated int32 modifiers = 101 [packed=true];
        optional bytes dataVariant = 102;
        optional int32 QMetaType = 103; // used for QVariant conversions
    }
    message Peer {
        required bytes uid = 1;
        optional string peerName = 2;
        repeated Entity peerEntities = 3;
    }
}

message VeinProtocol {
    optional Vein.Command command = 1;
    repeated Vein.Entity entityList = 2;
    repeated Vein.Peer peerList = 3;
}
