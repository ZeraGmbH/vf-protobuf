package protobuf;

message Vein {
    message Command {
        enum CommandType {
            ASYNC_ENTITY_UPDATE = 1;
            ASYNC_PEER_ADDED = 2; //NEW
            ASYNC_PEER_REMOVED = 3; //NEW
            ASYNC_ENTITY_ADDED = 4; //NEW
            ASYNC_ENTITY_REMOVED = 5; //NEW

            REQUEST_ENTITY_DATA = 101;
            REQUEST_ENTITY_START_ASYNC_UPDATE = 102;
            REQUEST_ENTITY_STOP_ASYNC_UPDATE = 103;

            MESSAGE_DEBUG = 201;
            MESSAGE_ERROR = 202;

            KILL_HUB = 300;
            INIT_ENTITY = 301;
            INIT_HUB = 302;
            INIT_PEER = 303;
        }
        required CommandType type = 1 [default = ASYNC_ENTITY_UPDATE];
        optional bytes uidSender = 2;
        repeated bytes uidReceiverList = 3;
    }
    message Entity {
        required bytes uid = 1;
        optional string entityName = 100;
        repeated int32 modifiers = 101 [packed=true];
        optional bytes dataVariant = 102;
        optional int32 QMetaType = 103; // used for QVariant conversions
    }
    message Peer {
        required string peerName = 1;
        repeated Entity peerEntities = 2;
    }
}

message VeinProtocol {
    optional Vein.Command command = 1;
    repeated Vein.Entity entityList = 2;
    repeated Vein.Peer peerList = 3;
}
